---
export interface Props {
  title: string;
  organization: string;
  posts: number;
  lastDate: Date | string;
  category: string;
  featured?: boolean;
  slug: string;
}

const { title, organization, posts, lastDate, category, featured = false, slug } = Astro.props;

import { formatDate } from './formatDate';

const categoryColors = {
  'latest-jobs': 'bg-green-500',
  'admit-cards': 'bg-blue-500',
  'results': 'bg-red-500',
  'syllabus': 'bg-purple-500'
};
---

<article class={`bg-white rounded-xl shadow-md hover:shadow-lg transition-shadow duration-200 border border-blue-100 p-4 flex flex-col gap-2 min-h-[180px] relative group ${featured ? 'ring-2 ring-yellow-300' : ''}`} style="max-width: 100%;">
  {featured && (
    <span class="absolute top-3 right-3 bg-yellow-400 text-yellow-900 text-xs font-bold px-2 py-0.5 rounded-full shadow">Featured</span>
  )}
  <div class="flex items-center justify-between mb-1">
    <span class={`inline-block px-2 py-0.5 text-xs font-semibold text-white rounded ${categoryColors[category] || 'bg-gray-500'}`}>{category.replace('-', ' ').toUpperCase()}</span>
  </div>
  <h3 class="text-base font-bold text-gray-900 mb-1 line-clamp-2">
    <a href={`/${category}/${slug}`} class="hover:text-blue-600 transition-colors">{title}</a>
  </h3>
  <div class="text-xs text-gray-600 font-medium mb-1">{organization}</div>
  <div class="flex justify-between items-center text-xs text-gray-500">
    <span>Posts: <strong>{posts}</strong></span>
    <span class="text-blue-600 font-semibold">Last: {formatDate(lastDate)}</span>
  </div>
  <div class="mt-2 flex justify-end">
    <a href={`/${category}/${slug}`} class="inline-flex items-center text-xs font-semibold text-blue-600 hover:text-blue-800 transition-colors px-2 py-1 rounded hover:bg-blue-50">
      Details
      <svg class="w-3 h-3 ml-1" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 20 20"><path d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>
    </a>
  </div>
</article>